<!DOCTYPE html>
<html lang="en" class="docs">
  <head>
    <meta charset="utf-8" />
    <link rel="stylesheet" media="screen" href="/assets/stylesheets/saf.typography.css"/>
    <link rel="stylesheet" media="screen" href="/assets/stylesheets/saf.layout.css"/>
    <link rel="stylesheet" media="screen" href="/assets/stylesheets/saf.extras.css"/>
    <link rel="stylesheet" media="screen" href="/assets/stylesheets/forms.css"/>
    <link rel="stylesheet" media="screen" href="/assets/stylesheets/uni-form.css"/>
    <link rel="stylesheet" media="screen" href="/assets/stylesheets/default.uni-form.css"/>
    <link rel="stylesheet" media="screen" href="/assets/stylesheets/docs.css"/>
    <link rel="stylesheet" media="screen" href="/assets/stylesheets/pygments.css"/>

    <title>
      
      Deploying with Capistrano -
       Semaphore Documentation</title>
  </head>
  <body>
    <nav>

  <div class="navCTA">
    <a href="https://semaphoreapp.com" class="button">Go to Semaphore</a>
  </div>

  <ul>
    <li><a href="mailto:328e3e4aab1aefecc60ed7e4cb33910bc3fbdeb2@incoming.intercom.io">Get Help</a></li>
    <li><a href="/">Documentation Index</a></li>
  </ul>

</nav>

    <div id="mainContent" class="safGrid">

      
        <nav class="docsNav">
          <a href="/">← Documentation Index</a>
        </nav>
      
      
      

      <article class="primary">

        <header class="title">
          <h2>Deploying with Capistrano</h2>

          
        </header>

        <section class="body">
          <p>Nowadays Capistrano is important part of many teams workflows, tool wich provides seamless and easy deployment process. To use Capistrano with Semaphore you only need to make sure that you have a configured project that uses Capistrano as deployment method.</p>

<p>To get started, go to your project&#8217;s settings &gt; Deployment and click to add a new server. This will launch a simple process that consists of 4 steps.</p>

<ul>
<li>Choosing your deployment strategy</li>

<li>Defining deploy commands</li>

<li>Adding private SSH key for deploy</li>

<li>Naming your server on Semaphore</li>
</ul>

<h2 id='choosing_your_deployment_strategy'>Choosing your deployment strategy</h2>

<p>There are two deployment strategies on Semaphore, &#8220;automatic&#8221; and &#8220;manual&#8221;. Automatic means that after every passed build on selected branch will trigger deploy, of course beside that you can trigger deploy manually at any time. Manual strategy offers you only manual way of triggering deploys.</p>

<h2 id='defining_deploy_commands'>Defining deploy commands</h2>

<p>Defining custom deploy commands gives you ability to name your deploy steps which will match your setup needs.</p>

<h2 id='adding_private_ssh_key_for_deploy'>Adding private SSH key for deploy</h2>

<p>Best approach to handle permissions for your deployment process is to create separate SSH keys specifically for Semaphore deployment. Generate new key pair with &#8220;ssh-keygen -t rsa&#8221; command and than add private key to Semaphore. The public key should be added on your server, in the <code>.ssh/authorized_keys</code> file, inside the deploy user’s home directory. This key combination gives Semaphore permission to SSH inside the server and execute deploy process.</p>

<p><strong>Note:</strong> Private key will be encrypted on Semaphore side and it will be available during deployment process, after initial setup there is no way to change it trough Semaphore interface.</p>

<h2 id='naming_your_server_on_semaphore'>Naming your server on Semaphore</h2>

<p>This is can be any name you like. It will be used on your Semaphore dashboard and deployment timeline.</p>

<p>By this point the setup is complete - you are ready to continuously deploy to your servers.</p>
        </section>

      </article>

      <div class="articles col cs-6">

  <h2>Billing</h2>
  <ul>
    <li><a href="/how-to-change-credit-card-information">How do I change my credit card information?</a></li>
  </ul>
  <h2>Collaboration</h2>
  <ul>
    <li><a href="/how-to-add-or-remove-collaborator">How can I add or remove a collaborator from my project?</a></li>
  </ul>

  <h2>Dependencies</h2>
  <ul>
    <li><a href="/how-to-use-postgres-mongodb-and-redis-on-one-project">Can I use Postgres, MongoDB and Redis on one project?</a></li>
    <li><a href="/how-to-install-dependency">My project depends on X and you don’t seem to have it</a></li>
    <li><a href="/wkhtmltopdf-configuration">wkhtmltopodf configuration</a></li>
    <li><a href="/test-apps">Test apps</a></li>
  </ul>

  <h2>Deployment</h2>
  <ul>
    <li><a href="/deploying-with-capistrano">Deploying with Capistrano</a></li>
    <li><a href="/deploying-to-heroku">Deploying to Heroku</a></li>
    <li><a href="/how-to-trigger-an-automatic-deploy">How can I manually trigger an automatic deploy?</a></li>
    <li><a href="/how-to-deploy-with-git-deploy">How to deploy with git-deploy</a></li>
    <li><a href="/deployment-fails-with-permission-denied">Deployment fails with "permission denied"</a></li>
  </ul>

  <h2>Troubleshooting</h2>
  <ul>
    <li><a href="/failed-with-unknown-database"> Build fails with “Unknown database ‘xyz_test’” or "FATAL: database “xyx_test” does not exist"</a></li>
    <li><a href="/failed-with-could-not-parse-object">“fatal: Could not parse object” during bundle install</a></li>
    <li><a href="/failed-with-file-not-found-db-create">file not found: db:create (ArgumentError)”</a></li>
    <li><a href="/failed-with-real-http-connections-are-disabled">Tests or setup failed with “Real HTTP connections are disabled.”</a></li>
    <li><a href="/failed-build-reported-as-passed">Failed build reported as passed</a></li>
    <li><a href="/build-fail-on-semaphore">My tests / integration specs / scenarios fail on Semaphore but pass locally</a></li>
    <li><a href="/selenium-unable-to-obtain-connection">Selenium tests are unable to obtain connection to Firefox</a></li>
    <li><a href="/issues-with-capybara-webkit">I’m having issues with capybara-webkit</a></li>
    <li><a href="/build-fails-with-pending-cucumber-scenarios">My build fails if I have pending Cucumber scenarios</a></li>
    <li><a href="/build-takes-longer-than-an-hour">My build takes longer than an hour</a></li>
    <li><a href="/sphinx-tests-fail">My Sphinx tests fail</a></li>
    <li><a href="/permission-denied-on-bundle-install">Permission denied from GitHub on bundle install</a></li>
  </ul>
</div>

<div class="articles col cs-6">
  <h2>API</h2>
  <ul>
    <li><a href="/projects-api">Projects</a></li>
    <li><a href="/branches-and-builds-api">Branches & builds</a></li>
    <li><a href="/servers-and-deploys-api">Servers & deploys</a></li>
  </ul>
  <h2>Build platform</h2>
  <ul>
    <li><a href="/platform-changelog">Platform changelog</a></li>
    <li><a href="/supported-stack">Supported stack</a></li>
    <li><a href="/version-information">Version information </a></li>
  </ul>
  <h2>Customizing your build</h2>
  <ul>
    <li><a href="/available-environment-variables">Available environment variables</a></li>
    <li><a href="/custom-build-commands">Custom build commands</a></li>
    <li><a href="/post-thread-commands">Post-thread commands</a></li>
    <li><a href="/how-to-securely-add-custom-file">How to securely add custom file</a></li>
    <li><a href="/how-to-add-native-dependency">How to add a native dependency</a></li>
    <li><a href="/how-to-export-environment-variables">How can I export some environment variables before the build?</a></li>
    <li><a href="/how-to-insert-configuration-file">How can I insert my configuration file for X?</a></li>
    <li><a href="/how-to-change-system-configuration-file">How can I change /etc/hosts or another system configuration file?</a></li>
    <li><a href="/how-to-configure-database">How do I configure the database?</a></li>
    <li><a href="/how-to-build-project-with-private-gems">How do I build a project with private gems?</a></li>
    <li><a href="/how-to-build-project-with-git-submodules">How do I build a project with git submodules?</a></li>
    <li><a href="/how-to-execute-postgres-commands">How can I execute Postgres commands?</a></li>
    <li><a href="/how-to-override-build-commands">Is it possible to override build commands on some branches?</a></li>
    <li><a href="/how-to-skip-building-for-some-commits">How to skip building some commits?</a></li>
    <li><a href="/how-to-install-specific-ruby-version">How to install specific Ruby version</a></li>
    <li><a href="/how-to-switch-ruby-version-on-branch">How to switch Ruby version on a specific branch</a></li>
  </ul>
  <h2>Notifications</h2>
  <ul>
    <li><a href="/finding-hipchat-token">Finding HipChat token</a></li>
    <li><a href="/post-build-webhooks">Post-build webhooks</a></li>
    <li><a href="/post-deploy-webhooks">Post-deploy webhooks</a></li>
  </ul>
  <h2>Integrations</h2>
  <ul>
    <li><a href="/cloud66-integration">Cloud 66</a></li>
    <li><a href="/codeclimate-integration">Code Climate</a></li>
    <li><a href="/cctry">CruiseControl status</a></li>
    <li><a href="/third-party-tools">Third party tools</a></li>
  </ul>
</div>


    </div>

    <footer class="safGrid">
  <p class="logo"><a href="https://semaphoreapp.com/"><img src="/assets/images/semaphore-logo.png" alt=""></a></p>
  <p>Semaphore is a service by <a href="http://renderedtext.com/">Rendered Text</a>.</p>
</footer>


  </body>
</html>
